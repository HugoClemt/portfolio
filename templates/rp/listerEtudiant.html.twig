{# liste les RP de l'√©tudiant connect√© #}
{% extends "entete.html.twig" %}{# appelle l'ent√™te (logo + menu d√©roulant) #}
{% block content %}
{% for message in app.flashes('success') %}{# affichera un message de succ√®s si l'action est r√©ussie #}
            <div class="alert alert-success">
                {{ message }}
            </div>
{% endfor %}
{% if app.user.etudiant.id == pEtudiant.id %}{# v√©rifie que la page appartient bien √† l'√©tudiant connect√© #}
<body>
<div class="container">
	<p></p><center><h1>R√©alisation professionnelle</h1></center><p></p>
	{% if is_granted('ROLE_ENSEIGNANT') %}{# si l'utilisateur connect√© poss√®de le r√¥le enseignant #}
	{% else %}
		<center><a href="{{ path('rpAjouter', { 'etudiant_id': app.user.etudiant.id }) }}"><input type="button" value="Ajouter une nouvelle r√©alisation professionnelle" class="btn btn-secondary btn-sl"></a></center><br>
		{% endif %}
				<table class="table" id="table" data-toggle="BootstrapTable" data-height="460">
				  <thead>
				    <tr>
					<th scope="col" data-sortable="true">Source</th>
				      <th scope="col" data-sortable="true">Libell√©</th>
				      <th scope="col" data-sortable="true">Nombre d'activit√©s</th>
					  <th scope="col" data-sortable="true">Statut</th> 
				      <th scope="col" data-sortable="true">Date</th>
				      <th></th>
				    </tr>
				  </thead>
				  <tbody>
				  	

					{% for RP in pRP %}
					
					
				    <tr>
					  <td>{{ RP.source.libelle }}</td>
				      <td><a class="text" href="{{ path('rpConsulter', { 'rp_id': RP.id }) }}">{{ RP.libcourt }}</a></td>
				      <td>{{ RP.activites.count }}</td>
					  <td>{{ RP.statut.libelle }}</td>
				      <td>{{ RP.dateDebut|date("d/m/Y") }}</td>
				      <td><a href="{{ path('rpArchivage', { 'rp_id': RP.id }) }}"><span title="Cliquer pour archiver">üìÅ</span></a>
				      </td>
				    </tr>
				    {% endfor %}
				    </tbody>
				</table>
				<br>


		<br><br>
</body>
{% else %}{# si la page n'appartient pas √† l'√©tudiant connect√©, un message s'affiche et bloque l'affichage #}
<br>
<center><p>Dommage c'est pas ta liste de r√©alisations professionnelles ! <a href="{{ path('etudiantListerLesRP', { 'etudiant_id': app.user.etudiant.id }) }}">Ta liste c'est par ici !</p></center>
{% endif %}
{% endblock %}